<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadan Challenge 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2d5f4f;
            --primary-light: #3d7f6f;
            --accent: #d4af37;
            --bg: #f8f6f3;
            --card: #ffffff;
            --text: #2c2c2c;
            --text-light: #666;
            --border: #e0ddd8;
            --success: #4caf50;
            --shadow: rgba(0, 0, 0, 0.08);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.3);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #2d5f4f 0%, #1a3d32 100%);
            background-attachment: fixed;
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(61, 127, 111, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: white;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .header .greeting {
            font-size: 18px;
            opacity: 0.95;
            margin-bottom: 15px;
        }

        .header .stage-info {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 10px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Login Form */
        .login-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 35px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin-top: 40px;
        }

        .login-card h2 {
            color: var(--primary);
            margin-bottom: 25px;
            text-align: center;
            font-size: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text);
            font-weight: 500;
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(45, 95, 79, 0.1);
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stat-card .value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-card .label {
            font-size: 12px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Progress Bar */
        .progress-section {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--text-light);
        }

        .progress-bar {
            height: 10px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        /* Tasks Card */
        .tasks-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 20px;
        }

        .tasks-card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-badge {
            background: linear-gradient(135deg, var(--accent) 0%, #c09020 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .task-item {
            background: var(--bg);
            padding: 16px;
            border-radius: 10px;
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .task-item:hover {
            border-color: var(--primary);
            background: white;
        }

        .task-item.completed {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success);
        }

        .task-checkbox {
            width: 22px;
            height: 22px;
            min-width: 22px;
            border: 2px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
            margin-top: 2px;
        }

        .task-checkbox:hover {
            border-color: var(--primary);
        }

        .task-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .task-checkbox.checked::after {
            content: 'тЬУ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text);
        }

        .task-ayah {
            font-size: 13px;
            color: var(--text-light);
            font-style: italic;
            margin-top: 6px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid var(--accent);
        }

        .task-points {
            color: var(--accent);
            font-weight: 600;
            font-size: 14px;
            white-space: nowrap;
        }

        /* Streak Badge */
        .streak-badge {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.2);
        }

        .streak-badge .icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .streak-badge .text {
            font-size: 14px;
            font-weight: 600;
        }

        /* Submit Button */
        .submit-section {
            margin-top: 25px;
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--success) 0%, #45a049 100%);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Logout */
        .logout-btn {
            background: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 8px 20px;
            font-size: 14px;
            margin-top: 10px;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Completion Message */
        .completion-card {
            background: linear-gradient(135deg, var(--success) 0%, #45a049 100%);
            color: white;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3);
        }

        .completion-card h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .completion-card p {
            font-size: 16px;
            opacity: 0.95;
        }

        /* Challenge Complete */
        .challenge-complete {
            background: linear-gradient(135deg, var(--accent) 0%, #c09020 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 30px rgba(212, 175, 55, 0.3);
        }

        .challenge-complete h2 {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .challenge-complete .final-score {
            font-size: 48px;
            font-weight: 700;
            margin: 20px 0;
        }

        /* Task Modal Popup */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--card);
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
            position: relative;
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 25px 25px 20px 25px;
            border-bottom: 2px solid var(--border);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--border);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--primary);
            color: white;
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 18px;
            color: var(--primary);
            font-weight: 600;
            padding-right: 40px;
            line-height: 1.4;
        }

        .modal-body {
            padding: 25px;
        }

        .modal-arabic {
            font-size: 28px;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            color: var(--primary);
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f6f3 0%, #ebe8e3 100%);
            border-radius: 12px;
            border-right: 4px solid var(--accent);
            font-family: 'Traditional Arabic', 'Scheherazade New', 'Amiri', 'Arial', sans-serif;
        }

        .modal-translation {
            font-size: 16px;
            line-height: 1.7;
            color: var(--text);
            margin-bottom: 25px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border-left: 3px solid var(--primary);
        }

        .modal-checkbox-container {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 20px;
            background: var(--bg);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-checkbox-container:hover {
            background: #e8e5e0;
        }

        .modal-checkbox {
            width: 28px;
            height: 28px;
            min-width: 28px;
            border: 3px solid var(--border);
            border-radius: 8px;
            position: relative;
            transition: all 0.2s ease;
        }

        .modal-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .modal-checkbox.checked::after {
            content: 'тЬУ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .modal-checkbox-label {
            font-size: 16px;
            font-weight: 500;
            color: var(--text);
        }

        .modal-points-badge {
            background: linear-gradient(135deg, var(--accent) 0%, #c09020 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-top: 15px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 24px;
            }

            .stats {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 15px 10px;
            }

            .stat-card .value {
                font-size: 24px;
            }

            .login-card {
                padding: 25px;
            }

            .modal-content {
                max-height: 90vh;
            }

            .modal-arabic {
                font-size: 24px;
                padding: 15px;
            }

            .modal-translation {
                font-size: 15px;
            }

            .modal-header {
                padding: 20px 20px 15px 20px;
            }

            .modal-body {
                padding: 20px;
            }
        }

        .hidden {
            display: none !important;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div id="loginScreen">
            <div class="header">
                <h1>ЁЯМЩ Ramadan Challenge 2025</h1>
                <p>30 Days of Spiritual Growth</p>
            </div>
            
            <div class="login-card">
                <h2>Welcome! Let's Begin</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="userName">Your Name</label>
                        <input type="text" id="userName" required placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="userMobile">Mobile Number</label>
                        <input type="tel" id="userMobile" required maxlength="10" pattern="[0-9]{10}" placeholder="Enter 10-digit mobile number">
                    </div>
                    <button type="submit" class="btn">Start My Journey</button>
                </form>
            </div>
        </div>

        <!-- Main App -->
        <div id="appScreen" class="hidden">
            <div class="header">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h1 style="margin: 0; flex: 1;">ЁЯМЩ <span class="lang-text" data-en="Ramadan Challenge" data-hi="рд░рдордЬрд╝рд╛рди рдЪреИрд▓реЗрдВрдЬ">Ramadan Challenge</span></h1>
                    <button onclick="toggleLanguage()" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600;">
                        <span id="langToggle">рд╣рд┐рдиреНрджреА</span>
                    </button>
                </div>
                <p class="greeting"><span class="lang-text" data-en="Assalamu Alaikum" data-hi="рдЕрд╕реНрд╕рд▓рд╛рдореБ рдЕрд▓реИрдХреБрдо">Assalamu Alaikum</span>, <span id="userNameDisplay"></span>!</p>
                <div class="stage-info">
                    <div id="stageTitle"></div>
                </div>
                <button class="btn logout-btn" onclick="logout()">Logout</button>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-card">
                    <div class="value" id="totalPoints">0</div>
                    <div class="label lang-text" data-en="Total Points" data-hi="рдХреБрд▓ рдЕрдВрдХ">Total Points</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="currentDay">1</div>
                    <div class="label lang-text" data-en="Day" data-hi="рджрд┐рди">Day</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="streakCount">0</div>
                    <div class="label lang-text" data-en="Streak" data-hi="рд╕рд┐рд▓рд╕рд┐рд▓рд╛">Streak</div>
                </div>
            </div>

            <!-- Progress -->
            <div class="progress-section">
                <div class="progress-label">
                    <span class="lang-text" data-en="Challenge Progress" data-hi="рдЪреИрд▓реЗрдВрдЬ рдХреА рдкреНрд░рдЧрддрд┐">Challenge Progress</span>
                    <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Testing Navigation (only visible in testing mode) -->
            <div id="testingNav" class="testing-nav hidden">
                <div style="background: #ff6b35; color: white; padding: 15px; border-radius: 12px; text-align: center; margin-bottom: 20px;">
                    <strong>ЁЯзк TESTING MODE</strong>
                    <p style="font-size: 13px; margin-top: 5px; opacity: 0.9;">Navigate through all 30 days to test the app</p>
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <button class="btn" onclick="previousDay()" style="flex: 1; background: #666;">
                        тЖР Previous Day
                    </button>
                    <button class="btn" onclick="nextDay()" style="flex: 1;">
                        Next Day тЖТ
                    </button>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="resetProgress()" style="flex: 1; background: #d32f2f; font-size: 14px;">
                        ЁЯФД Reset All Progress
                    </button>
                    <button class="btn" onclick="skipToDay()" style="flex: 1; background: #f57c00; font-size: 14px;">
                        тПня╕П Jump to Day...
                    </button>
                </div>
            </div> 

            <!-- Streak Badge -->
            <div id="streakBadge" class="streak-badge hidden">
                <div class="icon">ЁЯФе</div>
                <div class="text"></div>
            </div>

            <!-- Day Completion Message -->
            <div id="completionMessage" class="completion-card hidden">
                <h2><span class="lang-text" data-en="тЬи Alhamdulillah!" data-hi="тЬи рдЕрд▓рд╣рдореНрджреБрд▓рд┐рд▓реНрд▓рд╛рд╣!">тЬи Alhamdulillah!</span></h2>
                <p><span class="lang-text" data-en="You've completed today's tasks!" data-hi="рдЖрдкрдиреЗ рдЖрдЬ рдХреЗ рдХрд╛рдо рдкреВрд░реЗ рдХрд░ рд▓рд┐рдП!">You've completed today's tasks!</span></p>
            </div>

            <!-- Challenge Complete -->
            <div id="challengeComplete" class="challenge-complete hidden">
                <h2><span class="lang-text" data-en="ЁЯОЙ Challenge Complete!" data-hi="ЁЯОЙ рдЪреИрд▓реЗрдВрдЬ рдкреВрд░рд╛ рд╣реБрдЖ!">ЁЯОЙ Challenge Complete!</span></h2>
                <p><span class="lang-text" data-en="Congratulations on completing the 30-day Ramadan Challenge!" data-hi="рд░рдордЬрд╝рд╛рди рдХреЗ 30 рджрд┐рди рдХреЗ рдЪреИрд▓реЗрдВрдЬ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдкрд░ рдореБрдмрд╛рд░рдХрдмрд╛рдж!">Congratulations on completing the 30-day Ramadan Challenge!</span></p>
                <div class="final-score" id="finalScore">0</div>
                <p><span class="lang-text" data-en="May Allah accept your efforts!" data-hi="рдЕрд▓реНрд▓рд╛рд╣ рдЖрдкрдХреА рдХреЛрд╢рд┐рд╢ рдХрдмреВрд▓ рдХрд░реЗрдВ!">May Allah accept your efforts!</span></p>
            </div>

            <!-- Tasks -->
            <div id="tasksContainer" class="tasks-card">
                <h3>
                    <span class="day-badge"><span class="lang-text" data-en="Day" data-hi="рджрд┐рди">Day</span> <span id="dayNumber">1</span></span>
                    <span class="lang-text" data-en="Today's Tasks" data-hi="рдЖрдЬ рдХреЗ рдХрд╛рдо">Today's Tasks</span>
                </h3>
                <div id="tasksList"></div>
                
                <div class="submit-section">
                    <button class="btn submit-btn" id="submitBtn" onclick="submitTasks()">
                        <span class="lang-text" data-en="Submit Today's Progress" data-hi="рдЖрдЬ рдХреА рдкреНрд░рдЧрддрд┐ рдЬрдорд╛ рдХрд░реЗрдВ">Submit Today's Progress</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Task Detail Modal -->
        <div id="taskModal" class="modal-overlay hidden" onclick="closeModal(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <button class="modal-close" onclick="closeModal()">&times;</button>
                    <div class="modal-title" id="modalTaskTitle"></div>
                </div>
                <div class="modal-body">
                    <div class="modal-arabic" id="modalArabic"></div>
                    <div class="modal-translation" id="modalTranslation"></div>
                    <div class="modal-checkbox-container" onclick="toggleModalCheckbox()">
                        <div class="modal-checkbox" id="modalCheckbox"></div>
                        <div class="modal-checkbox-label lang-text" data-en="Mark as complete" data-hi="рдкреВрд░рд╛ рд╣реБрдЖ">Mark as complete</div>
                    </div>
                    <div class="modal-points-badge" id="modalPoints"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const SHEET_URL = 'https://script.google.com/macros/s/AKfycbzsWGot6PCxk_lJlF8VvCJeA4ey13B28pa5cRVgZdg17x15lFA9CdI3TNgGK438Vg5Y/exec'; // Replace with your Google Apps Script URL
        
        // TESTING MODE - Set to false for production
        const TESTING_MODE = false; // Shows navigation buttons to test all 30 days
        const TESTING_START_DATE = new Date(); // Today is Day 1 for testing

        // Stage definitions
        const STAGES = [
            { name: "Intention & Discipline", days: [1, 2, 3, 4, 5] },
            { name: "Self Control", days: [6, 7, 8, 9, 10] },
            { name: "Character Refinement", days: [11, 12, 13, 14, 15] },
            { name: "Inner Purification", days: [16, 17, 18, 19, 20] },
            { name: "Ihsan & Excellence", days: [21, 22, 23, 24, 25] },
            { name: "Transformation & Continuity", days: [26, 27, 28, 29, 30] }
        ];

        // Language translations (Indian spoken Urdu in Hindi script)
        let currentLanguage = 'en'; // 'en' or 'hi'
        
        const TRANSLATIONS = {
            // UI Elements
            'Ramadan Challenge': 'рд░рдордЬрд╝рд╛рди рдЪреИрд▓реЗрдВрдЬ',
            'Assalamu Alaikum': 'рдЕрд╕реНрд╕рд▓рд╛рдореБ рдЕрд▓реИрдХреБрдо',
            'Total Points': 'рдХреБрд▓ рдЕрдВрдХ',
            'Day': 'рджрд┐рди',
            'Streak': 'рд╕рд┐рд▓рд╕рд┐рд▓рд╛',
            'Challenge Progress': 'рдЪреИрд▓реЗрдВрдЬ рдХреА рдкреНрд░рдЧрддрд┐',
            'Today\'s Tasks': 'рдЖрдЬ рдХреЗ рдХрд╛рдо',
            'Submit Today\'s Progress': 'рдЖрдЬ рдХреА рдкреНрд░рдЧрддрд┐ рдЬрдорд╛ рдХрд░реЗрдВ',
            'Previous Day': 'рдкрд┐рдЫрд▓рд╛ рджрд┐рди',
            'Next Day': 'рдЕрдЧрд▓рд╛ рджрд┐рди',
            'Reset All Progress': 'рд╕рдм рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ',
            'Jump to Day...': 'рджрд┐рди рдкрд░ рдЬрд╛рдПрдВ...',
            'Mark as complete': 'рдкреВрд░рд╛ рд╣реБрдЖ',
            'Alhamdulillah!': 'рдЕрд▓рд╣рдореНрджреБрд▓рд┐рд▓реНрд▓рд╛рд╣!',
            'You\'ve completed today\'s tasks!': 'рдЖрдкрдиреЗ рдЖрдЬ рдХреЗ рдХрд╛рдо рдкреВрд░реЗ рдХрд░ рд▓рд┐рдП!',
            'Challenge Complete!': 'рдЪреИрд▓реЗрдВрдЬ рдкреВрд░рд╛ рд╣реБрдЖ!',
            'Congratulations on completing the 30-day Ramadan Challenge!': 'рд░рдордЬрд╝рд╛рди рдХреЗ 30 рджрд┐рди рдХреЗ рдЪреИрд▓реЗрдВрдЬ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдкрд░ рдореБрдмрд╛рд░рдХрдмрд╛рдж!',
            'May Allah accept your efforts!': 'рдЕрд▓реНрд▓рд╛рд╣ рдЖрдкрдХреА рдХреЛрд╢рд┐рд╢ рдХрдмреВрд▓ рдХрд░реЗрдВ!',
            'Logout': 'рд▓реЙрдЧрдЖрдЙрдЯ',
            
            // Stage names
            'Intention & Discipline': 'рдиреАрдпрдд рдФрд░ рдЕрдиреБрд╢рд╛рд╕рди',
            'Self Control': 'рдЖрддреНрдо-рдирд┐рдпрдВрддреНрд░рдг',
            'Character Refinement': 'рдЕрдЦрд╝рд▓рд╛рдХрд╝ рдХреА рддрд░рдмрд┐рдпрдд',
            'Inner Purification': 'рдмрд╛рддрд┐рдиреА рддрдЬрд╝рдХрд┐рдпрд╛',
            'Ihsan & Excellence': 'рдПрд╣рд╕рд╛рди рдФрд░ рдЙрддреНрдХреГрд╖реНрдЯрддрд╛',
            'Transformation & Continuity': 'рддрдмреНрджреАрд▓реА рдФрд░ рдЗрд╕реНрддрд┐рдХрд╛рдордд',
            
            // Task titles - All stages finalized
            // Stage 1
            'Prayed on time': 'рд╡рдХреНрдд рдкрд░ рдирдорд╛рдЬрд╝ рдкрдврд╝реА',
            'Said Bismillah before eating': 'рдЦрд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдмрд┐рд╕реНрдорд┐рд▓реНрд▓рд╛рд╣ рдХрд╣рд╛',
            'Removed an obstacle from the path': 'рд░рд╛рд╕реНрддреЗ рд╕реЗ рд░реБрдХрд╛рд╡рдЯ рд╣рдЯрд╛рдИ',
            'Practiced gratitude (listed 3 blessings)': 'рд╢реБрдХреНрд░ рдЕрджрд╛ рдХрд┐рдпрд╛ (3 рдиреЗрдЕрдорддреЗрдВ рд▓рд┐рдЦреАрдВ)',
            
            // Stage 2
            'Learned the translation of Surah Al-Fatiha and reflected on its meaning': 'рд╕реВрд░рд╣ рдЕрд▓-рдлрд╝рд╛рддрд┐рд╣рд╛ рдХрд╛ рддрд░реНрдЬреБрдорд╛ рд╕реАрдЦрд╛ рдФрд░ рдЙрд╕рдХреЗ рдордЕрдиреА рдкрд░ рдЧрд╝реМрд░ рдХрд┐рдпрд╛',
            'Said Alhamdulillah for a blessing': 'рдХрд┐рд╕реА рдиреЗрдЕрдордд рдкрд░ рдЕрд▓рд╣рдореНрджреБрд▓рд┐рд▓реНрд▓рд╛рд╣ рдХрд╣рд╛',
            'Controlled anger in a difficult situation': 'рдореБрд╢реНрдХрд┐рд▓ рд╣рд╛рд▓рд╛рдд рдореЗрдВ рдЧрд╝реБрд╕реНрд╕реЗ рдкрд░ рдХрд╛рдмреВ рд░рдЦрд╛',
            'Avoided gossip and backbiting': 'рдЧрд╝реАрдмрдд рдФрд░ рдмрджрдЧреЛрдИ рд╕реЗ рдмрдЪреЗ',
            
            // Stage 3
            'Prayed Tahajjud': 'рддрд╣рдЬреНрдЬреБрдж рдкрдврд╝реА',
            'Did one good deed quietly': 'рдЪреБрдкрдЪрд╛рдк рдПрдХ рдиреЗрдХ рдХрд╛рдо рдХрд┐рдпрд╛',
            'Performed an act of kindness for someone': 'рдХрд┐рд╕реА рдХреЗ рд╕рд╛рде рдиреЗрдХреА рдХрд╛ рдХрд╛рдо рдХрд┐рдпрд╛',
            'Spoke kind words to family members': 'рдШрд░ рд╡рд╛рд▓реЛрдВ рд╕реЗ рдЕрдЪреНрдЫреЗ рд▓рдлрд╝реНрдЬрд╝реЛрдВ рдореЗрдВ рдмрд╛рдд рдХреА',
            
            // Stage 4
            'Reflected on Fatiha and concentrated on it while praying': 'рдлрд╝рд╛рддрд┐рд╣рд╛ рдкрд░ рдЧрд╝реМрд░ рдХрд┐рдпрд╛ рдФрд░ рдирдорд╛рдЬрд╝ рдореЗрдВ рдЙрд╕ рдкрд░ рддрд╡рдЬреНрдЬреЛ рджреА',
            'Pondered on the things Allah created in the world and said SubhanAllah': 'рдЕрд▓реНрд▓рд╛рд╣ рдХреА рдмрдирд╛рдИ рдЪреАрдЬрд╝реЛрдВ рдкрд░ рдЧрд╝реМрд░ рдХрд┐рдпрд╛ рдФрд░ рд╕реБрдмрд╣рд╛рдирдЕрд▓реНрд▓рд╛рд╣ рдХрд╣рд╛',
            'Made sincere dua for someone else': 'рдХрд┐рд╕реА рдФрд░ рдХреЗ рд▓рд┐рдП рджрд┐рд▓ рд╕реЗ рджреБрдЖ рдХреА',
            'Reflected on personal shortcomings in journal': 'рдЕрдкрдиреА рдХрдорд┐рдпреЛрдВ рдкрд░ рдЧрд╝реМрд░ рдХрд┐рдпрд╛',
            
            // Stage 5
            'Thanked Allah for something small': 'рдХрд┐рд╕реА рдЫреЛрдЯреА рдЪреАрдЬрд╝ рдкрд░ рдЕрд▓реНрд▓рд╛рд╣ рдХрд╛ рд╢реБрдХреНрд░ рдЕрджрд╛ рдХрд┐рдпрд╛',
            'Left something that I can\'t do while fasting after breaking the fast too': 'рдХреЛрдИ рдРрд╕реА рдЪреАрдЬрд╝ рдЫреЛрдбрд╝реА рдЬреЛ рд░реЛрдЬрд╝реЗ рдореЗрдВ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛, рдЗрдлрд╝реНрддрд╛рд░ рдХреЗ рдмрд╛рдж рднреА',
            'Gave charity (any amount)': 'рд╕рджрдХрд╝рд╛ рджрд┐рдпрд╛ (рдХреЛрдИ рднреА рд░рдХрд╝рдо)',
            'Helped someone without expectation of return': 'рдХрд┐рд╕реА рдХреА рдорджрдж рдХреА рдмрд┐рдирд╛ рдмрджрд▓реЗ рдХреА рдЙрдореНрдореАрдж рдХреЗ',
            
            // Stage 6
            'Learned and reflected on first 10 ayahs of Surah Al-Kahf': 'рд╕реВрд░рд╣ рдЕрд▓-рдХрд╣рдлрд╝ рдХреА рдкрд╣рд▓реА 10 рдЖрдпрддреЗрдВ рд╕реАрдЦреАрдВ рдФрд░ рдЙрди рдкрд░ рдЧрд╝реМрд░ рдХрд┐рдпрд╛',
            'Planned one good deed to continue after Ramadan': 'рд░рдордЬрд╝рд╛рди рдХреЗ рдмрд╛рдж рднреА рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдиреЗрдХ рдХрд╛рдо рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рдИ',
            'Taught someone a beneficial Islamic knowledge': 'рдХрд┐рд╕реА рдХреЛ рдлрд╝рд╛рдпрджреЗрдордВрдж рдЗрд╕реНрд▓рд╛рдореА рдЗрд▓реНрдо рд╕рд┐рдЦрд╛рдпрд╛',
            'Read the following ayah with translation and reflect about it': 'рдпрд╣ рдЖрдпрдд рддрд░реНрдЬреБрдореЗ рдХреЗ рд╕рд╛рде рдкрдврд╝реЗрдВ рдФрд░ рдЙрд╕ рдкрд░ рдЧрд╝реМрд░ рдХрд░реЗрдВ',
            'Reflective Day: Read the following ayah and reflect on your Week 1 progress': 'рддрджрдмреНрдмреБрд░ рдХрд╛ рджрд┐рди: рдпрд╣ рдЖрдпрдд рдкрдврд╝реЗрдВ рдФрд░ рд╣рдлрд╝реНрддреЗ 1 рдХреА рдкреНрд░рдЧрддрд┐ рдкрд░ рдЧрд╝реМрд░ рдХрд░реЗрдВ',
            'Reflective Day: Read the following ayah and assess your self-control progress': 'рддрджрдмреНрдмреБрд░ рдХрд╛ рджрд┐рди: рдпрд╣ рдЖрдпрдд рдкрдврд╝реЗрдВ рдФрд░ рдЖрддреНрдо-рдирд┐рдпрдВрддреНрд░рдг рдХреА рдкреНрд░рдЧрддрд┐ рдХрд╛ рдЬрд╛рдпрдЬрд╝рд╛ рд▓реЗрдВ',
            'Reflective Day: Read the following ayah and assess your character growth': 'рддрджрдмреНрдмреБрд░ рдХрд╛ рджрд┐рди: рдпрд╣ рдЖрдпрдд рдкрдврд╝реЗрдВ рдФрд░ рдЕрдкрдиреЗ рдЕрдЦрд╝рд▓рд╛рдХрд╝ рдХреА рддрд░рдХрд╝реНрдХрд╝реА рдХрд╛ рдЬрд╛рдпрдЬрд╝рд╛ рд▓реЗрдВ',
            'Reflective Day: Read the following ayah and assess your spiritual purification': 'рддрджрдмреНрдмреБрд░ рдХрд╛ рджрд┐рди: рдпрд╣ рдЖрдпрдд рдкрдврд╝реЗрдВ рдФрд░ рдЕрдкрдиреА рд░реВрд╣рд╛рдиреА рддрдЬрд╝рдХрд┐рдпрд╛ рдХрд╛ рдЬрд╛рдпрдЬрд╝рд╛ рд▓реЗрдВ',
            'Reflective Day: Read the following ayah and reflect on striving for excellence': 'рддрджрдмреНрдмреБрд░ рдХрд╛ рджрд┐рди: рдпрд╣ рдЖрдпрдд рдкрдврд╝реЗрдВ рдФрд░ рдЙрддреНрдХреГрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП рдХреЛрд╢рд┐рд╢ рдкрд░ рдЧрд╝реМрд░ рдХрд░реЗрдВ',
            'Final Reflection: Read the following ayah and reflect on your complete transformation journey': 'рдЖрдЦрд╝рд┐рд░реА рддрджрдмреНрдмреБрд░: рдпрд╣ рдЖрдпрдд рдкрдврд╝реЗрдВ рдФрд░ рдЕрдкрдиреЗ рдкреВрд░реЗ рд╕рдлрд╝рд░ рдкрд░ рдЧрд╝реМрд░ рдХрд░реЗрдВ'
        };
        
        function translate(text) {
            if (currentLanguage === 'hi' && TRANSLATIONS[text]) {
                return TRANSLATIONS[text];
            }
            return text;
        }
        
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'hi' : 'en';
            document.getElementById('langToggle').textContent = currentLanguage === 'en' ? 'рд╣рд┐рдиреНрджреА' : 'English';
            updateLanguage();
        }
        
        function updateLanguage() {
            // Update all elements with lang-text class
            document.querySelectorAll('.lang-text').forEach(el => {
                const key = currentLanguage === 'en' ? 'data-en' : 'data-hi';
                if (el.hasAttribute(key)) {
                    el.textContent = el.getAttribute(key);
                }
            });
            
            // Refresh UI to update all translated content
            if (userData.mobile) {
                updateUI();
            }
        }

        // Daily tasks and Quranic verses - FINALIZED
        const TASKS_DATA = {
            // Stage 1: Intention & Discipline (Days 1-5)
            1: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪е┘Р┘Ж┘О┘С ╪з┘Д╪╡┘О┘С┘Д┘О╪з╪й┘О ┘Г┘О╪з┘Ж┘О╪к┘Т ╪╣┘О┘Д┘О┘Й ╪з┘Д┘Т┘Е┘П╪д┘Т┘Е┘Р┘Ж┘Р┘К┘Ж┘О ┘Г┘Р╪к┘О╪з╪и┘Л╪з ┘Е┘О┘С┘И┘Т┘В┘П┘И╪к┘Л╪з",
                    ayah: "Indeed, prayer has been decreed upon the believers at fixed times. (An-Nisa 4:103)",
                    ayahHindi: "рдмреЗрд╢рдХ, рдореЛрдорд┐рдиреЛрдВ рдкрд░ рдирдорд╛рдЬрд╝ рд╡рдХреНрдд рдХреЗ рд╕рд╛рде рдлрд╝рд░реНрдЬрд╝ рдХреА рдЧрдИ рд╣реИред (рдЕрди-рдирд┐рд╕рд╛ 4:103)",
                    relatesTo: "Prayer" 
                }
            },
            2: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘Б┘О┘Г┘П┘Д┘П┘И╪з ┘Е┘Р┘Е┘О┘С╪з ╪▒┘О╪▓┘О┘В┘О┘Г┘П┘Е┘П ╪з┘Д┘Д┘О┘С┘З┘П ╪н┘О┘Д┘О╪з┘Д┘Л╪з ╪╖┘О┘К┘Р┘С╪и┘Л╪з ┘И┘О╪з╪┤┘Т┘Г┘П╪▒┘П┘И╪з ┘Ж┘Р╪╣┘Т┘Е┘О╪к┘О ╪з┘Д┘Д┘О┘С┘З┘Р",
                    ayah: "So eat of what Allah has provided for you [which is] lawful and good. And be grateful for the favor of Allah. (An-Nahl 16:114)",
                    ayahHindi: "рддреЛ рдЦрд╛рдУ рдЬреЛ рдЕрд▓реНрд▓рд╛рд╣ рдиреЗ рддреБрдореНрд╣реЗрдВ рджрд┐рдпрд╛ рд╣реИ рдЬреЛ рд╣рд▓рд╛рд▓ рдФрд░ рдкрд╛рдХ рд╣реИред рдФрд░ рдЕрд▓реНрд▓рд╛рд╣ рдХреА рдиреЗрдЕрдордд рдХрд╛ рд╢реБрдХреНрд░ рдЕрджрд╛ рдХрд░реЛред (рдЕрди-рдирд╣рд▓ 16:114)",
                    relatesTo: "Bismillah" 
                }
            },
            3: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О┘Е┘О┘Ж ┘К┘О╪╣┘Т┘Е┘О┘Д┘Т ┘Е┘Р┘Ж┘О ╪з┘Д╪╡┘О┘С╪з┘Д┘Р╪н┘О╪з╪к┘Р ┘Е┘Р┘Ж ╪░┘О┘Г┘О╪▒┘Н ╪г┘О┘И┘Т ╪г┘П┘Ж╪л┘О┘Й┘░ ┘И┘О┘З┘П┘И┘О ┘Е┘П╪д┘Т┘Е┘Р┘Ж┘М ┘Б┘О╪г┘П┘И┘Д┘О┘░╪ж┘Р┘Г┘О ┘К┘О╪п┘Т╪о┘П┘Д┘П┘И┘Ж┘О ╪з┘Д┘Т╪м┘О┘Ж┘О┘С╪й┘О",
                    ayah: "And whoever does righteous deeds, whether male or female, while being a believer - those will enter Paradise. (An-Nisa 4:124)",
                    ayahHindi: "рдФрд░ рдЬреЛ рдиреЗрдХ рдХрд╛рдо рдХрд░реЗ, рдорд░реНрдж рд╣реЛ рдпрд╛ рдФрд░рдд, рдФрд░ рд╡реЛ рдореЛрдорд┐рди рд╣реЛ - рддреЛ рдРрд╕реЗ рд▓реЛрдЧ рдЬрдиреНрдирдд рдореЗрдВ рджрд╛рдЦрд╝рд┐рд▓ рд╣реЛрдВрдЧреЗред (рдЕрди-рдирд┐рд╕рд╛ 4:124)",
                    relatesTo: "Good Deeds" 
                }
            },
            4: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘Д┘О╪ж┘Р┘Ж ╪┤┘О┘Г┘О╪▒┘Т╪к┘П┘Е┘Т ┘Д┘О╪г┘О╪▓┘Р┘К╪п┘О┘Ж┘О┘С┘Г┘П┘Е┘Т",
                    ayah: "If you are grateful, I will surely increase you [in favor]. (Ibrahim 14:7)",
                    ayahHindi: "рдЕрдЧрд░ рддреБрдо рд╢реБрдХреНрд░ рдЕрджрд╛ рдХрд░реЛрдЧреЗ рддреЛ рдореИрдВ рдЬрд╝рд░реВрд░ рддреБрдореНрд╣реЗрдВ рдФрд░ рдЬрд╝реНрдпрд╛рджрд╛ рджреВрдБрдЧрд╛ред (рдЗрдмреНрд░рд╛рд╣реАрдо 14:7)",
                    relatesTo: "Gratitude" 
                }
            },
            5: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and reflect on your Week 1 progress", 
                    points: 20,
                    arabic: "┘В┘П┘Д┘Т ╪е┘Р┘Ж┘О┘С ╪╡┘О┘Д┘О╪з╪к┘Р┘К ┘И┘О┘Ж┘П╪│┘П┘Г┘Р┘К ┘И┘О┘Е┘О╪н┘Т┘К┘О╪з┘К┘О ┘И┘О┘Е┘О┘Е┘О╪з╪к┘Р┘К ┘Д┘Р┘Д┘О┘С┘З┘Р ╪▒┘О╪и┘Р┘С ╪з┘Д┘Т╪╣┘О╪з┘Д┘О┘Е┘Р┘К┘Ж┘О",
                    ayah: "Say, 'Indeed, my prayer, my rites of sacrifice, my living and my dying are for Allah, Lord of the worlds.' (Al-An'am 6:162)",
                    ayahHindi: "рдХрд╣ рджреЛ, 'рдмреЗрд╢рдХ рдореЗрд░реА рдирдорд╛рдЬрд╝, рдореЗрд░реА рдХреБрд░реНрдмрд╛рдиреА, рдореЗрд░реА рдЬрд╝рд┐рдиреНрджрдЧреА рдФрд░ рдореЗрд░реА рдореМрдд рдЕрд▓реНрд▓рд╛рд╣ рдХреЗ рд▓рд┐рдП рд╣реИ рдЬреЛ рддрдорд╛рдо рдЬрд╣рд╛рдБ рдХрд╛ рд░рдм рд╣реИред' (рдЕрд▓-рдЕрдирдЖрдо 6:162)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 2: Self Control (Days 6-10)
            6: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪з┘Д┘Т╪н┘О┘Е┘Т╪п┘П ┘Д┘Р┘Д┘О┘С┘З┘Р ╪▒┘О╪и┘Р┘С ╪з┘Д┘Т╪╣┘О╪з┘Д┘О┘Е┘Р┘К┘Ж┘О",
                    ayah: "All praise is due to Allah, Lord of the worlds. (Al-Fatiha 1:2)",
                    ayahHindi: "рддрдорд╛рдо рддрд╛рд░реАрдлрд╝ рдЕрд▓реНрд▓рд╛рд╣ рдХреЗ рд▓рд┐рдП рд╣реИ рдЬреЛ рддрдорд╛рдо рдЬрд╣рд╛рдБ рдХрд╛ рд░рдм рд╣реИред (рдЕрд▓-рдлрд╝рд╛рддрд┐рд╣рд╛ 1:2)",
                    relatesTo: "Al-Fatiha" 
                }
            },
            7: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘Б┘О╪з╪░┘Т┘Г┘П╪▒┘П┘И┘Ж┘Р┘К ╪г┘О╪░┘Т┘Г┘П╪▒┘Т┘Г┘П┘Е┘Т ┘И┘О╪з╪┤┘Т┘Г┘П╪▒┘П┘И╪з ┘Д┘Р┘К ┘И┘О┘Д┘О╪з ╪к┘О┘Г┘Т┘Б┘П╪▒┘П┘И┘Ж┘Р",
                    ayah: "So remember Me; I will remember you. And be grateful to Me and do not deny Me. (Al-Baqarah 2:152)",
                    ayahHindi: "рддреЛ рдореБрдЭреЗ рдпрд╛рдж рдХрд░реЛ, рдореИрдВ рддреБрдореНрд╣реЗрдВ рдпрд╛рдж рдХрд░реВрдБрдЧрд╛ред рдФрд░ рдореЗрд░рд╛ рд╢реБрдХреНрд░ рдЕрджрд╛ рдХрд░реЛ рдФрд░ рдирд╛рд╢реБрдХреНрд░реА рди рдХрд░реЛред (рдЕрд▓-рдмрдХрд╝рд░рд╣ 2:152)",
                    relatesTo: "Alhamdulillah" 
                }
            },
            8: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О╪з┘Д┘Т┘Г┘О╪з╪╕┘Р┘Е┘Р┘К┘Ж┘О ╪з┘Д┘Т╪║┘О┘К┘Т╪╕┘О ┘И┘О╪з┘Д┘Т╪╣┘О╪з┘Б┘Р┘К┘Ж┘О ╪╣┘О┘Ж┘Р ╪з┘Д┘Ж┘О┘С╪з╪│┘Р ┘И┘О╪з┘Д┘Д┘О┘С┘З┘П ┘К┘П╪н┘Р╪и┘П┘С ╪з┘Д┘Т┘Е┘П╪н┘Т╪│┘Р┘Ж┘Р┘К┘Ж┘О",
                    ayah: "And those who restrain anger and pardon people - and Allah loves the doers of good. (Al-Imran 3:134)",
                    ayahHindi: "рдФрд░ рд╡реЛ рдЬреЛ рдЧрд╝реБрд╕реНрд╕рд╛ рдкреА рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рд▓реЛрдЧреЛрдВ рдХреЛ рдорд╛рдлрд╝ рдХрд░ рджреЗрддреЗ рд╣реИрдВ - рдФрд░ рдЕрд▓реНрд▓рд╛рд╣ рдиреЗрдХреА рдХрд░рдиреЗ рд╡рд╛рд▓реЛрдВ рд╕реЗ рдореЛрд╣рдмреНрдмрдд рдХрд░рддрд╛ рд╣реИред (рдЖрд▓реЗ-рдЗрдорд░рд╛рди 3:134)",
                    relatesTo: "Controlling Anger" 
                }
            },
            9: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О┘Д┘О╪з ╪к┘О╪м┘О╪│┘О┘С╪│┘П┘И╪з ┘И┘О┘Д┘О╪з ┘К┘О╪║┘Т╪к┘О╪и ╪и┘О┘С╪╣┘Т╪╢┘П┘Г┘П┘Е ╪и┘О╪╣┘Т╪╢┘Л╪з",
                    ayah: "And do not spy or backbite each other. Would one of you like to eat the flesh of his brother when dead? (Al-Hujurat 49:12)",
                    ayahHindi: "рдФрд░ рди рдЯреЛрд╣ рд▓реЛ рдФрд░ рди рдПрдХ рджреВрд╕рд░реЗ рдХреА рдЧрд╝реАрдмрдд рдХрд░реЛред рдХреНрдпрд╛ рддреБрдордореЗрдВ рд╕реЗ рдХреЛрдИ рдкрд╕рдВрдж рдХрд░реЗрдЧрд╛ рдХрд┐ рдЕрдкрдиреЗ рдореБрд░реНрджрд╛ рднрд╛рдИ рдХрд╛ рдЧреЛрд╢реНрдд рдЦрд╛рдП? (рдЕрд▓-рд╣реБрдЬреБрд░рд╛рдд 49:12)",
                    relatesTo: "Avoiding Gossip" 
                }
            },
            10: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and assess your self-control progress", 
                    points: 20,
                    arabic: "╪е┘Р┘Ж┘О┘С┘Е┘О╪з ┘К┘П┘И┘О┘Б┘О┘С┘Й ╪з┘Д╪╡┘О┘С╪з╪и┘Р╪▒┘П┘И┘Ж┘О ╪г┘О╪м┘Т╪▒┘О┘З┘П┘Е ╪и┘Р╪║┘О┘К┘Т╪▒┘Р ╪н┘Р╪│┘О╪з╪и┘Н",
                    ayah: "Indeed, the patient will be given their reward without account. (Az-Zumar 39:10)",
                    ayahHindi: "рдмреЗрд╢рдХ рд╕рдмреНрд░ рдХрд░рдиреЗ рд╡рд╛рд▓реЛрдВ рдХреЛ рдЙрдирдХрд╛ рдЕрдЬреНрд░ рдмреЗрд╣рд┐рд╕рд╛рдм рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред (рдЕрдЬрд╝-рдЬрд╝реБрдорд░ 39:10)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 3: Character Refinement (Days 11-15)
            11: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О┘Е┘Р┘Ж┘О ╪з┘Д┘Д┘О┘С┘К┘Т┘Д┘Р ┘Б┘О╪к┘О┘З┘О╪м┘О┘С╪п┘Т ╪и┘Р┘З┘Р ┘Ж┘О╪з┘Б┘Р┘Д┘О╪й┘Л ┘Д┘О┘С┘Г┘О",
                    ayah: "And from [part of] the night, pray with it as additional [worship] for you. (Al-Isra 17:79)",
                    ayahHindi: "рдФрд░ рд░рд╛рдд рдХреЗ рдХреБрдЫ рд╣рд┐рд╕реНрд╕реЗ рдореЗрдВ рддрд╣рдЬреНрдЬреБрдж рдкрдврд╝реЛ, рдпрд╣ рддреБрдореНрд╣рд╛рд░реЗ рд▓рд┐рдП рдирдлрд╝рд┐рд▓ рд╣реИред (рдЕрд▓-рдЗрд╕рд░рд╛ 17:79)",
                    relatesTo: "Tahajjud" 
                }
            },
            12: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪е┘Р┘Ж ╪к┘П╪и┘Т╪п┘П┘И╪з ╪з┘Д╪╡┘О┘С╪п┘О┘В┘О╪з╪к┘Р ┘Б┘О┘Ж┘Р╪╣┘Р┘Е┘О┘С╪з ┘З┘Р┘К┘О ┘И┘О╪е┘Р┘Ж ╪к┘П╪о┘Т┘Б┘П┘И┘З┘О╪з ┘И┘О╪к┘П╪д┘Т╪к┘П┘И┘З┘О╪з ╪з┘Д┘Т┘Б┘П┘В┘О╪▒┘О╪з╪б┘О ┘Б┘О┘З┘П┘И┘О ╪о┘О┘К┘Т╪▒┘М ┘Д┘О┘С┘Г┘П┘Е┘Т",
                    ayah: "If you disclose your charitable expenditures, they are good; but if you conceal them and give them to the poor, it is better for you. (Al-Baqarah 2:271)",
                    ayahHindi: "рдЕрдЧрд░ рддреБрдо рдЕрдкрдиреЗ рд╕рджрдХрд╝рд╛рдд рдЬрд╝рд╛рд╣рд┐рд░ рдХрд░реЛ рддреЛ рдЕрдЪреНрдЫрд╛ рд╣реИ, рдФрд░ рдЕрдЧрд░ рдЫреБрдкрд╛рдУ рдФрд░ рдЧрд╝рд░реАрдмреЛрдВ рдХреЛ рджреЛ рддреЛ рддреБрдореНрд╣рд╛рд░реЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рд╣реИред (рдЕрд▓-рдмрдХрд╝рд░рд╣ 2:271)",
                    relatesTo: "Secret Good Deeds" 
                }
            },
            13: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О╪з┘Б┘Т╪╣┘О┘Д┘П┘И╪з ╪з┘Д┘Т╪о┘О┘К┘Т╪▒┘О ┘Д┘О╪╣┘О┘Д┘О┘С┘Г┘П┘Е┘Т ╪к┘П┘Б┘Т┘Д┘Р╪н┘П┘И┘Ж┘О",
                    ayah: "And do good that you may succeed. (Al-Hajj 22:77)",
                    ayahHindi: "рдФрд░ рдиреЗрдХреА рдХрд░реЛ рддрд╛рдХрд┐ рддреБрдо рдХрд╛рдордпрд╛рдм рд╣реЛред (рдЕрд▓-рд╣рдЬреНрдЬ 22:77)",
                    relatesTo: "Kindness" 
                }
            },
            14: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О┘В┘П┘И┘Д┘П┘И╪з ┘Д┘Р┘Д┘Ж┘О┘С╪з╪│┘Р ╪н┘П╪│┘Т┘Ж┘Л╪з",
                    ayah: "And speak to people good [words]. (Al-Baqarah 2:83)",
                    ayahHindi: "рдФрд░ рд▓реЛрдЧреЛрдВ рд╕реЗ рдЕрдЪреНрдЫреЗ рд▓рдлрд╝реНрдЬрд╝реЛрдВ рдореЗрдВ рдмрд╛рдд рдХрд░реЛред (рдЕрд▓-рдмрдХрд╝рд░рд╣ 2:83)",
                    relatesTo: "Kind Words" 
                }
            },
            15: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and assess your character growth", 
                    points: 20,
                    arabic: "┘И┘О╪е┘Р┘Ж┘О┘С┘Г┘О ┘Д┘О╪╣┘О┘Д┘О┘Й┘░ ╪о┘П┘Д┘П┘В┘Н ╪╣┘О╪╕┘Р┘К┘Е┘Н",
                    ayah: "And indeed, you are of a great moral character. (Al-Qalam 68:4)",
                    ayahHindi: "рдФрд░ рдмреЗрд╢рдХ, рдЖрдк рдмрд╣реБрдд рдмрдбрд╝реЗ рдЕрдЦрд╝рд▓рд╛рдХрд╝ рд╡рд╛рд▓реЗ рд╣реИрдВред (рдЕрд▓-рдХрд╝рд▓рдо 68:4)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 4: Inner Purification (Days 16-20)
            16: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘В┘О╪п┘Т ╪г┘О┘Б┘Т┘Д┘О╪н┘О ╪з┘Д┘Т┘Е┘П╪д┘Т┘Е┘Р┘Ж┘П┘И┘Ж┘О ╪з┘Д┘О┘С╪░┘Р┘К┘Ж┘О ┘З┘П┘Е┘Т ┘Б┘Р┘К ╪╡┘О┘Д┘О╪з╪к┘Р┘З┘Р┘Е┘Т ╪о┘О╪з╪┤┘Р╪╣┘П┘И┘Ж┘О",
                    ayah: "Successful indeed are the believers who are humble in their prayers. (Al-Mu'minun 23:1-2)",
                    ayahHindi: "рдмреЗрд╢рдХ рдХрд╛рдордпрд╛рдм рд╣реБрдП рд╡реЛ рдореЛрдорд┐рди рдЬреЛ рдЕрдкрдиреА рдирдорд╛рдЬрд╝реЛрдВ рдореЗрдВ рдЦреБрд╢реВ рдХрд░рддреЗ рд╣реИрдВред (рдЕрд▓-рдореЛрдорд┐рдиреВрди 23:1-2)",
                    relatesTo: "Prayer Concentration" 
                }
            },
            17: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪е┘Р┘Ж┘О┘С ┘Б┘Р┘К ╪о┘О┘Д┘Т┘В┘Р ╪з┘Д╪│┘О┘С┘Е┘О╪з┘И┘О╪з╪к┘Р ┘И┘О╪з┘Д┘Т╪г┘О╪▒┘Т╪╢┘Р ┘И┘О╪з╪о┘Т╪к┘Р┘Д┘О╪з┘Б┘Р ╪з┘Д┘Д┘О┘С┘К┘Т┘Д┘Р ┘И┘О╪з┘Д┘Ж┘О┘С┘З┘О╪з╪▒┘Р ┘Д┘О╪в┘К┘О╪з╪к┘Н ┘Д┘Р┘С╪г┘П┘И┘Д┘Р┘К ╪з┘Д┘Т╪г┘О┘Д┘Т╪и┘О╪з╪и┘Р",
                    ayah: "Indeed, in the creation of the heavens and the earth and the alternation of the night and the day are signs for those of understanding. (Al-Imran 3:190)",
                    ayahHindi: "рдмреЗрд╢рдХ рдЖрд╕рдорд╛рдиреЛрдВ рдФрд░ рдЬрд╝рдореАрди рдХреА рдкреИрджрд╛рдЗрд╢ рдореЗрдВ рдФрд░ рд░рд╛рдд-рджрд┐рди рдХреЗ рдмрджрд▓рдиреЗ рдореЗрдВ рдЕрдХрд╝реНрд▓ рд╡рд╛рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдирд┐рд╢рд╛рдирд┐рдпрд╛рдБ рд╣реИрдВред (рдЖрд▓реЗ-рдЗрдорд░рд╛рди 3:190)",
                    relatesTo: "Pondering Creation" 
                }
            },
            18: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О╪з┘Д┘О┘С╪░┘Р┘К┘Ж┘О ╪м┘О╪з╪б┘П┘И╪з ┘Е┘Р┘Ж ╪и┘О╪╣┘Т╪п┘Р┘З┘Р┘Е┘Т ┘К┘О┘В┘П┘И┘Д┘П┘И┘Ж┘О ╪▒┘О╪и┘О┘С┘Ж┘О╪з ╪з╪║┘Т┘Б┘Р╪▒┘Т ┘Д┘О┘Ж┘О╪з ┘И┘О┘Д┘Р╪е┘Р╪о┘Т┘И┘О╪з┘Ж┘Р┘Ж┘О╪з",
                    ayah: "And those who came after them say, 'Our Lord, forgive us and our brothers.' (Al-Hashr 59:10)",
                    ayahHindi: "рдФрд░ рд╡реЛ рдЬреЛ рдЙрдирдХреЗ рдмрд╛рдж рдЖрдП рдХрд╣рддреЗ рд╣реИрдВ, 'рдР рд╣рдорд╛рд░реЗ рд░рдм! рд╣рдореЗрдВ рдФрд░ рд╣рдорд╛рд░реЗ рднрд╛рдЗрдпреЛрдВ рдХреЛ рдорд╛рдлрд╝ рдХрд░ред' (рдЕрд▓-рд╣рд╢реНрд░ 59:10)",
                    relatesTo: "Dua for Others" 
                }
            },
            19: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘К┘О╪з ╪г┘О┘К┘П┘С┘З┘О╪з ╪з┘Д┘О┘С╪░┘Р┘К┘Ж┘О ╪в┘Е┘О┘Ж┘П┘И╪з ╪к┘П┘И╪и┘П┘И╪з ╪е┘Р┘Д┘О┘Й ╪з┘Д┘Д┘О┘С┘З┘Р ╪к┘О┘И┘Т╪и┘О╪й┘Л ┘Ж┘О┘С╪╡┘П┘И╪н┘Л╪з",
                    ayah: "O you who have believed, repent to Allah with sincere repentance. (At-Tahrim 66:8)",
                    ayahHindi: "рдР рдИрдорд╛рди рд╡рд╛рд▓реЛ! рдЕрд▓реНрд▓рд╛рд╣ рд╕реЗ рд╕рдЪреНрдЪреА рддреМрдмрд╛ рдХрд░реЛред (рдЕрдд-рддрд╣рд░реАрдо 66:8)",
                    relatesTo: "Self-Reflection" 
                }
            },
            20: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and assess your spiritual purification", 
                    points: 20,
                    arabic: "┘В┘О╪п┘Т ╪г┘О┘Б┘Т┘Д┘О╪н┘О ┘Е┘О┘Ж ╪▓┘О┘Г┘О┘С╪з┘З┘О╪з",
                    ayah: "He has succeeded who purifies himself. (Al-A'la 87:14)",
                    ayahHindi: "рдмреЗрд╢рдХ рдХрд╛рдордпрд╛рдм рд╣реБрдЖ рдЬрд┐рд╕рдиреЗ рдЕрдкрдиреЗ рдирдлрд╝реНрд╕ рдХреЛ рдкрд╛рдХ рдХрд┐рдпрд╛ред (рдЕрд▓-рдЖрд▓рд╛ 87:14)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 5: Ihsan & Excellence (Days 21-25)
            21: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О╪е┘Р╪░┘Т ╪к┘О╪г┘О╪░┘О┘С┘Ж┘О ╪▒┘О╪и┘П┘С┘Г┘П┘Е┘Т ┘Д┘О╪ж┘Р┘Ж ╪┤┘О┘Г┘О╪▒┘Т╪к┘П┘Е┘Т ┘Д┘О╪г┘О╪▓┘Р┘К╪п┘О┘Ж┘О┘С┘Г┘П┘Е┘Т",
                    ayah: "And [remember] when your Lord proclaimed, 'If you are grateful, I will surely increase you [in favor].' (Ibrahim 14:7)",
                    ayahHindi: "рдФрд░ рдпрд╛рдж рдХрд░реЛ рдЬрдм рддреБрдореНрд╣рд╛рд░реЗ рд░рдм рдиреЗ рдПрд▓рд╛рди рдХрд┐рдпрд╛, 'рдЕрдЧрд░ рддреБрдо рд╢реБрдХреНрд░ рдЕрджрд╛ рдХрд░реЛрдЧреЗ рддреЛ рдореИрдВ рдЬрд╝рд░реВрд░ рддреБрдореНрд╣реЗрдВ рдЬрд╝реНрдпрд╛рджрд╛ рджреВрдБрдЧрд╛ред' (рдЗрдмреНрд░рд╛рд╣реАрдо 14:7)",
                    relatesTo: "Thanking Allah" 
                }
            },
            22: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О╪з╪╣┘Т╪и┘П╪п┘Т ╪▒┘О╪и┘О┘С┘Г┘О ╪н┘О╪к┘О┘С┘Й┘░ ┘К┘О╪г┘Т╪к┘Р┘К┘О┘Г┘О ╪з┘Д┘Т┘К┘О┘В┘Р┘К┘Ж┘П",
                    ayah: "And worship your Lord until there comes to you the certainty [death]. (Al-Hijr 15:99)",
                    ayahHindi: "рдФрд░ рдЕрдкрдиреЗ рд░рдм рдХреА рдЗрдмрд╛рджрдд рдХрд░реЛ рдпрд╣рд╛рдБ рддрдХ рдХрд┐ рддреБрдореНрд╣реЗрдВ рдпрдХрд╝реАрди (рдореМрдд) рдЖ рдЬрд╛рдПред (рдЕрд▓-рд╣рд┐рдЬреНрд░ 15:99)",
                    relatesTo: "Continuity" 
                }
            },
            23: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘Е┘О╪л┘О┘Д┘П ╪з┘Д┘О┘С╪░┘Р┘К┘Ж┘О ┘К┘П┘Ж┘Б┘Р┘В┘П┘И┘Ж┘О ╪г┘О┘Е┘Т┘И┘О╪з┘Д┘О┘З┘П┘Е┘Т ┘Б┘Р┘К ╪│┘О╪и┘Р┘К┘Д┘Р ╪з┘Д┘Д┘О┘С┘З┘Р ┘Г┘О┘Е┘О╪л┘О┘Д┘Р ╪н┘О╪и┘О┘С╪й┘Н ╪г┘О┘Ж╪и┘О╪к┘О╪к┘Т ╪│┘О╪и┘Т╪╣┘О ╪│┘О┘Ж┘О╪з╪и┘Р┘Д┘О",
                    ayah: "The example of those who spend their wealth in the way of Allah is like a seed which grows seven spikes. (Al-Baqarah 2:261)",
                    ayahHindi: "рдЬреЛ рд▓реЛрдЧ рдЕрд▓реНрд▓рд╛рд╣ рдХреА рд░рд╛рд╣ рдореЗрдВ рдЕрдкрдирд╛ рдорд╛рд▓ рдЦрд╝рд░реНрдЪ рдХрд░рддреЗ рд╣реИрдВ рдЙрдирдХреА рдорд┐рд╕рд╛рд▓ рдРрд╕реА рд╣реИ рдЬреИрд╕реЗ рдПрдХ рджрд╛рдирд╛ рдЬрд┐рд╕рд╕реЗ рд╕рд╛рдд рдмрд╛рд▓рд┐рдпрд╛рдБ рдЙрдЧреАрдВред (рдЕрд▓-рдмрдХрд╝рд░рд╣ 2:261)",
                    relatesTo: "Charity" 
                }
            },
            24: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪е┘Р┘Ж┘О┘С┘Е┘О╪з ┘Ж┘П╪╖┘Т╪╣┘Р┘Е┘П┘Г┘П┘Е┘Т ┘Д┘Р┘И┘О╪м┘Т┘З┘Р ╪з┘Д┘Д┘О┘С┘З┘Р ┘Д┘О╪з ┘Ж┘П╪▒┘Р┘К╪п┘П ┘Е┘Р┘Ж┘Г┘П┘Е┘Т ╪м┘О╪▓┘О╪з╪б┘Л ┘И┘О┘Д┘О╪з ╪┤┘П┘Г┘П┘И╪▒┘Л╪з",
                    ayah: "We feed you only for the countenance of Allah. We wish not from you reward or gratitude. (Al-Insan 76:9)",
                    ayahHindi: "рд╣рдо рддреБрдореНрд╣реЗрдВ рд╕рд┐рд░реНрдлрд╝ рдЕрд▓реНрд▓рд╛рд╣ рдХреА рдЦрд╝рд╛рддрд┐рд░ рдЦрд╛рдирд╛ рдЦрд┐рд▓рд╛рддреЗ рд╣реИрдВред рд╣рдо рддреБрдорд╕реЗ рди рдмрджрд▓рд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рди рд╢реБрдХреНрд░рд┐рдпрд╛ред (рдЕрд▓-рдЗрдВрд╕рд╛рди 76:9)",
                    relatesTo: "Helping Others" 
                }
            },
            25: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and reflect on striving for excellence", 
                    points: 20,
                    arabic: "┘И┘О╪з┘Д┘О┘С╪░┘Р┘К┘Ж┘О ╪м┘О╪з┘З┘О╪п┘П┘И╪з ┘Б┘Р┘К┘Ж┘О╪з ┘Д┘О┘Ж┘О┘З┘Т╪п┘Р┘К┘О┘Ж┘О┘С┘З┘П┘Е┘Т ╪│┘П╪и┘П┘Д┘О┘Ж┘О╪з",
                    ayah: "And those who strive for Us - We will surely guide them to Our ways. (Al-Ankabut 29:69)",
                    ayahHindi: "рдФрд░ рдЬреЛ рд▓реЛрдЧ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ - рд╣рдо рдЬрд╝рд░реВрд░ рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рд░рд╛рд╕реНрддреЛрдВ рдХреА рд╣рд┐рджрд╛рдпрдд рджреЗрдВрдЧреЗред (рдЕрд▓-рдЕрдирдХрдмреВрдд 29:69)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 6: Transformation & Continuity (Days 26-30)
            26: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪з┘Д┘Т╪н┘О┘Е┘Т╪п┘П ┘Д┘Р┘Д┘О┘С┘З┘Р ╪з┘Д┘О┘С╪░┘Р┘К ╪г┘О┘Ж╪▓┘О┘Д┘О ╪╣┘О┘Д┘О┘Й┘░ ╪╣┘О╪и┘Т╪п┘Р┘З┘Р ╪з┘Д┘Т┘Г┘Р╪к┘О╪з╪и┘О ┘И┘О┘Д┘О┘Е┘Т ┘К┘О╪м┘Т╪╣┘О┘Д ┘Д┘О┘С┘З┘П ╪╣┘Р┘И┘О╪м┘Л╪з",
                    ayah: "All praise is due to Allah, who has sent down upon His Servant the Book and has not made therein any deviance. (Al-Kahf 18:1)",
                    ayahHindi: "рддрдорд╛рдо рддрд╛рд░реАрдлрд╝ рдЕрд▓реНрд▓рд╛рд╣ рдХреЗ рд▓рд┐рдП рд╣реИ рдЬрд┐рд╕рдиреЗ рдЕрдкрдиреЗ рдмрдВрджреЗ рдкрд░ рдХрд┐рддрд╛рдм рдирд╛рдЬрд╝рд┐рд▓ рдХреА рдФрд░ рдЙрд╕рдореЗрдВ рдХреЛрдИ рдЯреЗрдврд╝рд╛рдкрди рдирд╣реАрдВ рд░рдЦрд╛ред (рдЕрд▓-рдХрд╣рдлрд╝ 18:1)",
                    relatesTo: "Surah Al-Kahf" 
                }
            },
            27: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪з┘Д┘О┘С╪░┘Р┘К┘Ж┘О ┘К┘П┘Ж┘Б┘Р┘В┘П┘И┘Ж┘О ╪г┘О┘Е┘Т┘И┘О╪з┘Д┘О┘З┘П┘Е ╪и┘Р╪з┘Д┘Д┘О┘С┘К┘Т┘Д┘Р ┘И┘О╪з┘Д┘Ж┘О┘С┘З┘О╪з╪▒┘Р ╪│┘Р╪▒┘Л┘С╪з ┘И┘О╪╣┘О┘Д┘О╪з┘Ж┘Р┘К┘О╪й┘Л",
                    ayah: "Those who spend their wealth by night and day, secretly and publicly. (Al-Baqarah 2:274)",
                    ayahHindi: "рд╡реЛ рдЬреЛ рдЕрдкрдирд╛ рдорд╛рд▓ рд░рд╛рдд рдФрд░ рджрд┐рди, рдЫреБрдкреЗ рдФрд░ рдЦреБрд▓реЗ рдореЗрдВ рдЦрд╝рд░реНрдЪ рдХрд░рддреЗ рд╣реИрдВред (рдЕрд▓-рдмрдХрд╝рд░рд╣ 2:274)",
                    relatesTo: "Secret Good Deeds" 
                }
            },
            28: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "╪е┘Р┘Ж┘О┘С ╪г┘О╪н┘О╪и┘О┘С ╪з┘Д┘Т╪г┘О╪╣┘Т┘Е┘О╪з┘Д┘Р ╪е┘Р┘Д┘О┘Й ╪з┘Д┘Д┘О┘С┘З┘Р ╪г┘О╪п┘Т┘И┘О┘Е┘П┘З┘О╪з ┘И┘О╪е┘Р┘Ж┘Т ┘В┘О┘Д┘О┘С",
                    ayah: "Indeed, the most beloved of deeds to Allah are those that are consistent, even if small. (Hadith - Bukhari)",
                    ayahHindi: "рдмреЗрд╢рдХ рдЕрд▓реНрд▓рд╛рд╣ рдХреЛ рд╕рдмрд╕реЗ рдкрд╕рдВрджреАрджрд╛ рдЖрдорд╛рд▓ рд╡реЛ рд╣реИрдВ рдЬреЛ рдореБрд╕рд▓рд╕рд▓ рд╣реЛрдВ, рдЪрд╛рд╣реЗ рдЫреЛрдЯреЗ рд╣реА рдХреНрдпреЛрдВ рди рд╣реЛрдВред (рд╣рджреАрд╕ - рдмреБрдЦрд╝рд╛рд░реА)",
                    relatesTo: "Planning Continuity" 
                }
            },
            29: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "┘И┘О╪░┘О┘Г┘Р┘С╪▒┘Т ┘Б┘О╪е┘Р┘Ж┘О┘С ╪з┘Д╪░┘Р┘С┘Г┘Т╪▒┘О┘Й┘░ ╪к┘О┘Ж┘Б┘О╪╣┘П ╪з┘Д┘Т┘Е┘П╪д┘Т┘Е┘Р┘Ж┘Р┘К┘Ж┘О",
                    ayah: "And remind, for indeed, the reminder benefits the believers. (Adh-Dhariyat 51:55)",
                    ayahHindi: "рдФрд░ рдпрд╛рдж рджрд┐рд▓рд╛рдУ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╛рдж рджрд┐рд▓рд╛рдирд╛ рдореЛрдорд┐рдиреЛрдВ рдХреЛ рдлрд╝рд╛рдпрджрд╛ рдкрд╣реБрдБрдЪрд╛рддрд╛ рд╣реИред (рдЕрдз-рдзрд╛рд░рд┐рдпрд╛рдд 51:55)",
                    relatesTo: "Teaching Knowledge" 
                }
            },
            30: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Final Reflection: Read the following ayah and reflect on your complete transformation journey", 
                    points: 20,
                    arabic: "╪е┘Р┘Ж┘О┘С ╪з┘Д┘Д┘О┘С┘З┘О ┘Д┘О╪з ┘К┘П╪║┘О┘К┘Р┘С╪▒┘П ┘Е┘О╪з ╪и┘Р┘В┘О┘И┘Т┘Е┘Н ╪н┘О╪к┘О┘С┘Й┘░ ┘К┘П╪║┘О┘К┘Р┘С╪▒┘П┘И╪з ┘Е┘О╪з ╪и┘Р╪г┘О┘Ж┘Б┘П╪│┘Р┘З┘Р┘Е┘Т",
                    ayah: "Indeed, Allah will not change the condition of a people until they change what is in themselves. (Ar-Ra'd 13:11)",
                    ayahHindi: "рдмреЗрд╢рдХ рдЕрд▓реНрд▓рд╛рд╣ рдХрд┐рд╕реА рдХрд╝реМрдо рдХреА рд╣рд╛рд▓рдд рдХреЛ рдирд╣реАрдВ рдмрджрд▓рддрд╛ рдЬрдм рддрдХ рд╡реЛ рдЕрдкрдиреА рд╣рд╛рд▓рдд рди рдмрджрд▓реЗрдВред (рдЕрд░-рд░рдЕрдж 13:11)",
                    relatesTo: "Stage Summary" 
                }
            }
        };


        // State management
        let userData = {
            name: '',
            mobile: '',
            completedDays: {},
            totalPoints: 0,
            currentStreak: 0,
            lastCompletedDay: 0
        };

        // Initialize app
        function init() {
            console.log('App initializing...');
            loadUserData();
            console.log('User data loaded:', userData);
            
            // Initialize testing day if in testing mode
            if (TESTING_MODE && !userData.testingDay) {
                userData.testingDay = 1;
                saveUserData();
            }
            
            // Set up login form event listener
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                console.log('Login form found, adding event listener');
                loginForm.addEventListener('submit', function(e) {
                    console.log('Form submitted!');
                    e.preventDefault();
                    const name = document.getElementById('userName').value.trim();
                    const mobile = document.getElementById('userMobile').value.trim();
                    
                    console.log('Name:', name, 'Mobile:', mobile);
                    
                    if (name && mobile) {
                        userData.name = name;
                        userData.mobile = mobile;
                        saveUserData();
                        console.log('Showing app...');
                        showApp();
                    } else {
                        alert('Please enter both name and mobile number');
                    }
                });
            } else {
                console.error('Login form not found!');
            }
            
            // Close modal on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
            
            if (userData.mobile) {
                console.log('User already logged in, showing app');
                showApp();
            } else {
                console.log('No user data, showing login');
                showLogin();
            }
        }

        // Testing Mode Functions
        function nextDay() {
            if (!TESTING_MODE) return;
            const currentDay = userData.testingDay || 1;
            if (currentDay < 30) {
                userData.testingDay = currentDay + 1;
                saveUserData();
                updateUI();
            } else {
                alert('Already at Day 30!');
            }
        }

        function previousDay() {
            if (!TESTING_MODE) return;
            const currentDay = userData.testingDay || 1;
            if (currentDay > 1) {
                userData.testingDay = currentDay - 1;
                saveUserData();
                updateUI();
            } else {
                alert('Already at Day 1!');
            }
        }

        function skipToDay() {
            if (!TESTING_MODE) return;
            const day = prompt('Enter day number (1-30):');
            const dayNum = parseInt(day);
            if (dayNum >= 1 && dayNum <= 30) {
                userData.testingDay = dayNum;
                saveUserData();
                updateUI();
            } else {
                alert('Please enter a valid day between 1 and 30');
            }
        }

        function resetProgress() {
            if (!TESTING_MODE) return;
            if (confirm('Are you sure you want to reset ALL progress? This will clear all completed days and points.')) {
                userData.completedDays = {};
                userData.totalPoints = 0;
                userData.currentStreak = 0;
                userData.lastCompletedDay = 0;
                userData.testingDay = 1;
                saveUserData();
                updateUI();
                alert('Progress reset! Starting fresh from Day 1.');
            }
        }

        function showLogin() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('appScreen').classList.add('hidden');
        }

        function showApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('appScreen').classList.remove('hidden');
            document.getElementById('userNameDisplay').textContent = userData.name;
            updateUI();
        }

        // Calculate current day (1-30)
        function getCurrentDay() {
            if (TESTING_MODE) {
                // In testing mode, use manual day counter
                return userData.testingDay || 1;
            }
            
            // Production mode - calculate based on Ramadan start date
            const today = new Date();
            const ramadanStart = new Date('2025-02-14'); // Update this to actual Ramadan start date
            const diffTime = Math.abs(today - ramadanStart);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return Math.min(Math.max(1, diffDays), 30);
        }

        // Get current stage
        function getCurrentStage(day) {
            return STAGES.find(stage => stage.days.includes(day));
        }

        // Update UI
        function updateUI() {
            const currentDay = getCurrentDay();
            const stage = getCurrentStage(currentDay);
            
            // Show/hide testing navigation
            const testingNav = document.getElementById('testingNav');
            if (testingNav) {
                if (TESTING_MODE) {
                    testingNav.classList.remove('hidden');
                } else {
                    testingNav.classList.add('hidden');
                }
            }
            
            // Update header
            const translatedStageName = translate(stage.name);
            const daysText = currentLanguage === 'en' ? 'Days' : 'рджрд┐рди';
            document.getElementById('stageTitle').innerHTML = `
                Stage ${STAGES.indexOf(stage) + 1}: ${translatedStageName}<br>
                <small style="opacity: 0.8;">${daysText} ${stage.days[0]} - ${stage.days[stage.days.length - 1]}</small>
            `;
            
            // Update stats
            document.getElementById('totalPoints').textContent = userData.totalPoints;
            document.getElementById('currentDay').textContent = currentDay;
            document.getElementById('streakCount').textContent = userData.currentStreak;
            
            // Update progress
            const progress = (currentDay / 30) * 100;
            document.getElementById('progressPercent').textContent = `${Math.round(progress)}%`;
            document.getElementById('progressFill').style.width = `${progress}%`;
            
            // Check if day already completed
            if (userData.completedDays[currentDay]) {
                showCompletionMessage();
            } else {
                loadTasks(currentDay);
            }

            // Check if challenge is complete
            if (currentDay > 30 || Object.keys(userData.completedDays).length === 30) {
                showChallengeComplete();
            }

            // Show streak badge if applicable
            updateStreakBadge();
        }

        function loadTasks(day) {
            const dayData = TASKS_DATA[day];
            if (!dayData) return;

            document.getElementById('dayNumber').textContent = day;
            document.getElementById('completionMessage').classList.add('hidden');
            document.getElementById('tasksContainer').classList.remove('hidden');

            const tasksList = document.getElementById('tasksList');
            tasksList.innerHTML = '';

            // Add regular tasks
            dayData.tasks.forEach((task, index) => {
                const taskEl = createTaskElement(task, `task-${index}`);
                tasksList.appendChild(taskEl);
            });

            // Add Quran task
            const quranTaskEl = createTaskElement(dayData.quranTask, 'quran-task', true);
            tasksList.appendChild(quranTaskEl);
        }

        function createTaskElement(task, id, isQuranTask = false) {
            const div = document.createElement('div');
            div.className = 'task-item';
            
            // Store task data for modal
            div.dataset.taskId = id;
            div.dataset.taskData = JSON.stringify(task);
            
            const translatedTitle = translate(task.title);
            const pointsText = currentLanguage === 'en' ? 'pts' : 'рдЕрдВрдХ';
            
            // Only Quran task (5th task) opens modal, others just tick
            const contentClickHandler = isQuranTask ? `onclick="openTaskModal('${id}')"` : '';
            
            // For Quran task: show Arabic if available, otherwise show translation as fallback
            let ayahDisplay = '';
            if (isQuranTask) {
                if (task.arabic) {
                    ayahDisplay = `<div class="task-ayah">${task.arabic}</div>`;
                } else if (task.ayah) {
                    // Fallback for days without Arabic text yet
                    ayahDisplay = `<div class="task-ayah">${task.ayah}</div>`;
                }
            }
            
            div.innerHTML = `
                <div class="task-checkbox" id="${id}" onclick="event.stopPropagation(); toggleTask('${id}')"></div>
                <div class="task-content" ${contentClickHandler}>
                    <div class="task-title">${translatedTitle}</div>
                    ${ayahDisplay}
                </div>
                <div class="task-points">+${task.points} ${pointsText}</div>
            `;
            return div;
        }

        function toggleTask(taskId) {
            const checkbox = document.getElementById(taskId);
            checkbox.classList.toggle('checked');
            checkbox.closest('.task-item').classList.toggle('completed');
        }

        // Modal Functions
        let currentModalTaskId = null;

        function openTaskModal(taskId) {
            const taskElement = document.querySelector(`[data-task-id="${taskId}"]`);
            if (!taskElement) return;
            
            const taskData = JSON.parse(taskElement.dataset.taskData);
            currentModalTaskId = taskId;
            
            // Populate modal with translated content
            const translatedTitle = translate(taskData.title);
            const pointsText = currentLanguage === 'en' ? 'points' : 'рдЕрдВрдХ';
            document.getElementById('modalTaskTitle').textContent = translatedTitle;
            document.getElementById('modalPoints').textContent = `+${taskData.points} ${pointsText}`;
            
            // Show Arabic text if available
            const arabicEl = document.getElementById('modalArabic');
            if (taskData.arabic) {
                arabicEl.textContent = taskData.arabic;
                arabicEl.style.display = 'block';
            } else {
                arabicEl.style.display = 'none';
            }
            
            // Show translation based on selected language
            const translationEl = document.getElementById('modalTranslation');
            if (currentLanguage === 'hi' && taskData.ayahHindi) {
                translationEl.textContent = taskData.ayahHindi;
                translationEl.style.display = 'block';
            } else if (taskData.ayah) {
                translationEl.textContent = taskData.ayah;
                translationEl.style.display = 'block';
            } else {
                translationEl.style.display = 'none';
            }
            
            // Sync checkbox state
            const checkbox = document.getElementById(taskId);
            const modalCheckbox = document.getElementById('modalCheckbox');
            if (checkbox && checkbox.classList.contains('checked')) {
                modalCheckbox.classList.add('checked');
            } else {
                modalCheckbox.classList.remove('checked');
            }
            
            // Show modal
            document.getElementById('taskModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scroll
        }

        function closeModal(event) {
            // Close if clicking overlay or close button
            if (!event || event.target.classList.contains('modal-overlay') || event.type === 'click') {
                document.getElementById('taskModal').classList.add('hidden');
                document.body.style.overflow = 'auto';
                currentModalTaskId = null;
            }
        }

        function toggleModalCheckbox() {
            if (!currentModalTaskId) return;
            
            const modalCheckbox = document.getElementById('modalCheckbox');
            const taskCheckbox = document.getElementById(currentModalTaskId);
            
            // Toggle both checkboxes
            modalCheckbox.classList.toggle('checked');
            
            if (taskCheckbox) {
                if (modalCheckbox.classList.contains('checked')) {
                    taskCheckbox.classList.add('checked');
                    taskCheckbox.closest('.task-item').classList.add('completed');
                } else {
                    taskCheckbox.classList.remove('checked');
                    taskCheckbox.closest('.task-item').classList.remove('completed');
                }
            }
        }

        function submitTasks() {
            const currentDay = getCurrentDay();
            const dayData = TASKS_DATA[currentDay];
            
            // In testing mode, allow resubmission
            if (TESTING_MODE && userData.completedDays[currentDay]) {
                if (!confirm('This day is already completed. Re-submit and update points?')) {
                    return;
                }
                // Subtract previous points
                const previousPoints = userData.completedDays[currentDay].points;
                userData.totalPoints -= previousPoints;
            }
            
            // Count completed tasks
            let completedCount = 0;
            let earnedPoints = 0;

            // Check regular tasks
            dayData.tasks.forEach((task, index) => {
                const checkbox = document.getElementById(`task-${index}`);
                if (checkbox && checkbox.classList.contains('checked')) {
                    completedCount++;
                    earnedPoints += task.points;
                }
            });

            // Check Quran task
            const quranCheckbox = document.getElementById('quran-task');
            if (quranCheckbox && quranCheckbox.classList.contains('checked')) {
                completedCount++;
                earnedPoints += dayData.quranTask.points;
            }

            if (completedCount === 0) {
                alert('Please complete at least one task before submitting.');
                return;
            }

            // Calculate streak
            let newStreak = 1;
            if (userData.lastCompletedDay === currentDay - 1) {
                newStreak = userData.currentStreak + 1;
            }

            // Award streak bonus every 5 days
            let streakBonus = 0;
            if (newStreak % 5 === 0) {
                streakBonus = 50;
                earnedPoints += streakBonus;
            }

            // Update user data
            userData.completedDays[currentDay] = {
                tasks: completedCount,
                points: earnedPoints,
                timestamp: new Date().toISOString()
            };
            userData.totalPoints += earnedPoints;
            userData.currentStreak = newStreak;
            userData.lastCompletedDay = currentDay;

            saveUserData();
            sendToGoogleSheets(currentDay, completedCount, earnedPoints, streakBonus);
            showCompletionMessage(earnedPoints, streakBonus);
        }

        function showCompletionMessage(points, streakBonus) {
            document.getElementById('tasksContainer').classList.add('hidden');
            const completionMsg = document.getElementById('completionMessage');
            completionMsg.classList.remove('hidden');
            
            if (streakBonus > 0) {
                completionMsg.innerHTML = `
                    <h2>тЬи Alhamdulillah!</h2>
                    <p>You've completed today's tasks!</p>
                    <p style="margin-top: 10px; font-size: 18px; font-weight: 600;">
                        +${points} points (including ${streakBonus} streak bonus!)
                    </p>
                `;
            }

            updateUI();
        }

        function updateStreakBadge() {
            const badge = document.getElementById('streakBadge');
            const streak = userData.currentStreak;

            if (streak >= 5) {
                badge.classList.remove('hidden');
                const nextMilestone = Math.ceil(streak / 5) * 5;
                const daysToGo = nextMilestone - streak;
                
                if (daysToGo === 0) {
                    badge.querySelector('.text').textContent = `${streak}-Day Streak! You earned 50 bonus points!`;
                } else {
                    badge.querySelector('.text').textContent = `${streak}-Day Streak! ${daysToGo} more day${daysToGo > 1 ? 's' : ''} for bonus points!`;
                }
            } else if (streak > 0) {
                badge.classList.remove('hidden');
                badge.querySelector('.text').textContent = `${streak}-Day Streak! Keep it up!`;
            } else {
                badge.classList.add('hidden');
            }
        }

        function showChallengeComplete() {
            const completeDiv = document.getElementById('challengeComplete');
            completeDiv.classList.remove('hidden');
            document.getElementById('finalScore').textContent = userData.totalPoints;
            document.getElementById('tasksContainer').classList.add('hidden');
        }

        // Local storage functions
        function saveUserData() {
            localStorage.setItem('ramadanChallengeUser', JSON.stringify(userData));
        }

        function loadUserData() {
            const saved = localStorage.getItem('ramadanChallengeUser');
            if (saved) {
                userData = JSON.parse(saved);
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout? Your data will be saved.')) {
                showLogin();
            }
        }

        // Google Sheets integration
        function sendToGoogleSheets(day, tasksCompleted, points, streakBonus) {
            // Skip if URL not configured
            if (SHEET_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
                console.log('Google Sheets not configured');
                return;
            }

            const data = {
                timestamp: new Date().toISOString(),
                name: userData.name,
                mobile: userData.mobile,
                day: day,
                stage: getCurrentStage(day).name,
                tasksCompleted: tasksCompleted,
                points: points,
                streakBonus: streakBonus,
                totalPoints: userData.totalPoints,
                currentStreak: userData.currentStreak
            };

            fetch(SHEET_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => {
                console.error('Error sending to Google Sheets:', error);
            });
        }

        // Initialize on page load
        window.onload = init;
    </script>
</body>
</html>
